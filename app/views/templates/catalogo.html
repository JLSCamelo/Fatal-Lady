<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Catálogo</title>
    <link
      rel="icon"
      href="/static/uploads/img/main_icon/icon.png"
      type="image/png"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', path='css/catalogo-style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>
  </head>

  <body>
    <header>
      <div class="header-div">
        <img
          src="/static/uploads/img/home/icons-main/languages.png"
          id="language-icon"
        />
        <select name="language" id="language">
          <option value="br">BR</option>
          <option value="en">EN</option>
          <option value="es">ES</option>
        </select>
      </div>

      <div class="header-div">
        <p><b>Frete Grátis</b> para Compras Acima de R$ 299,00</p>
      </div>

      <div class="header-div">
        <a href="#">Ajuda</a>
        <a href="/login">Entrar</a>
      </div>
    </header>

    <nav>
      <div class="nav-div">
        <form action="/search" method="get" id="search-form">
          <button type="submit">
            <img
              src="/static/uploads/img/home/icons-main/lupa.png"
              id="search-icon"
            />
          </button>
          <input
            type="search"
            id="search-input"
            name="Search"
            placeholder="Buscar"
          />
        </form>
      </div>

      <div class="nav-div">
        <a href="/">
          <img
            src="/static/uploads/img/home/icons-main/letreiro-logo.png"
            id="logo"
            alt="Logo"
          />
        </a>
      </div>

      <div class="nav-div">
        <img
          src="/static/uploads/img/home/icons-main/carrinho-de-compras.png"
          id="shopping-kart-icon"
          class="icons"
        />
        <img
          src="/static/uploads/img/home/icons-main/menu-hamburguer.png"
          id="menu-hamburguer-icon"
          class="icons"
        />
      </div>
    </nav>

    <div
      id="side-overlay"
      aria-hidden="true"
      aria-labelledby="side-title"
      role="dialog"
    >
      <aside id="side-panel" aria-modal="true">
        <div class="side-header">
          <h2 id="side-title">Menu</h2>
          <button id="side-close" aria-label="Fechar menu">✕</button>
        </div>

        <nav id="side-nav">
          <ul>
            <li><a href="/" class="side-link">Home</a></li>
            <li><a href="/produtos" class="side-link">Catálogo</a></li>
          </ul>
        </nav>

        <section
          class="side-section"
          id="cart-section"
          aria-labelledby="cart-title"
        >
          <div class="cart-header">
            <h3 id="cart-title">Carrinho</h3>
            <div id="cart-summary"><span id="cart-count">0</span> itens</div>
          </div>
          <div id="cart-preview" aria-live="polite">
            <p class="cart-empty">Seu carrinho está vazio.</p>
          </div>
          <div class="cart-actions">
            <a id="view-cart-btn" class="btn" href="cart.html">Ver carrinho</a>
            <a id="checkout-btn" class="btn primary" href="checkout.html"
              >Finalizar</a
            >
          </div>
        </section>

        <section class="side-section">
          <h3>Categorias</h3>
          <ul class="side-cats">
            <li><a href="#">Saltos</a></li>
            <li><a href="#">Rasteiras</a></li>
            <li><a href="#">Botas</a></li>
            <li><a href="#">Tênis</a></li>
            <li><a href="#">Sapatilhas</a></li>
            <li><a href="#">Sandálias</a></li>
          </ul>
        </section>

        <section class="side-section">
          <h3>Conta</h3>
          <ul class="side-options-account">
            <li><a href="account.html">Minha Conta</a></li>
            <li><a href="orders.html">Meus Pedidos</a></li>
            <li><a href="wishlist.html">Favoritos</a></li>
            <li><a href="settings.html">Configurações</a></li>
          </ul>
        </section>

        <section class="side-section">
          <h3>Ajuda</h3>
          <ul class="side-options">
            <li><a href="contact.html">Fale conosco</a></li>
            <li><a href="faq.html">FAQ</a></li>
          </ul>
        </section>

        <div class="side-footer">
          <button id="clear-cart" class="text-btn">Limpar carrinho</button>
          <a href="#" id="logout-link" class="text-btn">Sair</a>
        </div>
      </aside>
    </div>

    <main>
      <section id="products" class="products-section">
        <div class="container">
          <header class="products-header">
            <div class="products-header-inner">

                <h2 class="catalog-title">CATÁLOGO</h2>

                <!-- TOP ROW: filtros de calçados — centralizados (VERMELHO) -->
                <div class="filters-top-row">
                <div class="cat-filters" id="cat-filters" role="tablist" aria-label="Filtros de categoria">
                    <button class="filter-btn" data-filter="1" type="button">Sandália</button>
                    <button class="filter-btn" data-filter="2" type="button">Botas</button>
                    <button class="filter-btn" data-filter="3" type="button">Salto Alto</button>
                    <button class="filter-btn" data-filter="4" type="button">Rasteirinha</button>
                    <button class="filter-btn" data-filter="5" type="button">Sapatilha</button>
                    <button class="filter-btn" data-filter="6" type="button">Tênis</button>
                </div>
                </div>

                <!-- MIDDLE ROW: busca (esquerda) + controles de preço/cores/limpar (direita) -->
<div class="filters-middle-row">
  <div class="search-left">
    <label for="products-search" class="visually-hidden">Buscar produtos</label>
    <div class="search-box">
      <input id="products-search" type="search" placeholder="Buscar Produto" />
    </div>
  </div>

  <div class="right-controls">
    <div class="price-filter" id="price-filter" aria-label="Filtro de preço">
      <div class="price-values">
        <label>R$ <span id="price-min-display">0,00</span></label>
        <span>—</span>
        <label>R$ <span id="price-max-display">0,00</span></label>
      </div>
      <div class="price-ranges">
        <input id="price-min" type="range" min="0" max="1000" value="0" step="0.01" />
        <input id="price-max" type="range" min="0" max="1000" value="1000" step="0.01" />
      </div>
    </div>

    <div class="color-filter" id="color-filter" aria-label="Filtro por cor">
      <div id="color-filters" class="color-filters"></div>
    </div>

    <div class="filter-actions">
      <button id="clear-filters" class="filter-clear" type="button">Limpar filtros</button>
    </div>
  </div>
</div>

<!-- SIZE ROW: filtro de tamanhos em linha separada abaixo -->
<div class="filters-size-row">
  <div class="size-filter" id="size-filter" aria-label="Filtro de tamanho">
    <span class="size-label">Tamanhos:</span>
    <div class="size-filters" id="size-filters">
      <button class="size-chip" data-size="32" type="button" aria-label="Tamanho 32">32</button>
      <button class="size-chip" data-size="33" type="button" aria-label="Tamanho 33">33</button>
      <button class="size-chip" data-size="34" type="button" aria-label="Tamanho 34">34</button>
      <button class="size-chip" data-size="35" type="button" aria-label="Tamanho 35">35</button>
      <button class="size-chip" data-size="36" type="button" aria-label="Tamanho 36">36</button>
      <button class="size-chip" data-size="37" type="button" aria-label="Tamanho 37">37</button>
      <button class="size-chip" data-size="38" type="button" aria-label="Tamanho 38">38</button>
      <button class="size-chip" data-size="39" type="button" aria-label="Tamanho 39">39</button>
      <button class="size-chip" data-size="40" type="button" aria-label="Tamanho 40">40</button>
      <button class="size-chip" data-size="41" type="button" aria-label="Tamanho 41">41</button>
      <button class="size-chip" data-size="42" type="button" aria-label="Tamanho 42">42</button>
    </div>
  </div>
</div>

<!-- FOOTER VISUAL (delimita final do header) -->
<div class="products-header-bottom"></div>

            </div>
          </header>

          <div id="products-grid" class="products-grid">
            {% for group in produtos|groupby('nome_categoria') %}
            <section class="category-row" id="category-{{ group.grouper }}">
                <div class="category-header">
                <h3 class="category-title">
                    {% if group.list and group.list[0].categoria_nome is defined %}
                    {{ group.list[0].categoria_nome }}
                    {% else %}
                    {{ group.grouper }}
                    {% endif %}
                </h3>

                <div class="category-arrows">
                    <button class="arrow scroll-prev" aria-label="Rolar para a esquerda">‹</button>
                    <button class="arrow scroll-next" aria-label="Rolar para a direita">›</button>
                </div>
                </div>

                <div class="category-products">
                {% for p in group.list %}
                <article class="product-card"
                        data-category="{{ p.nome_categoria }}"
                        data-name="{{ p.nome }}"
                        data-id="p{{ p.id_produto }}"
                        data-price="{{ (p.preco) }}"
                        data-color="{% if p.cor is defined %}{{ p.cor }}{% else %}Unspecified{% endif %}"
                        data-size="{{ p.tamanhos }}">
                    <div class="product-badge">{{ (p.nome_categoria)|upper }}</div>

                    <a href="/produto-get/{{ p.id_produto }}" class="product-media">
                    <img src="/static/uploads/img/catalogo/products/default.png" alt="{{ p.nome }}" />
                    </a>

                    <div class="product-body">
                    <h3 class="product-name">{{ p.nome }}</h3>
                    <div class="product-price">R$ <span class="price-value">{{ ('%.2f'|format(p.preco)).replace('.', ',') }}</span></div>
                    </div>

                    <div class="product-actions">
                    <button class="add-to-cart" type="button" aria-label="Adicionar {{ p.nome }} ao carrinho" data-id="{{ p.id_produto }}">Adicionar</button>
                    </div>
                </article>
                {% endfor %}
                </div>
            </section>
            {% endfor %}
            </div>
      </section>
    </main>

    <section class="newsletter">
      <h2>CADASTRE-SE</h2>
      <p>E GANHE <b>10% OFF</b> NA SUA PRIMEIRA COMPRA</p>
      <form>
        <input type="text" placeholder="Nome Completo" />
        <input type="email" placeholder="Email" />
        <button type="submit">ENVIAR</button>
      </form>
    </section>

    <footer>
      <div class="footer-links">
        <div>
          <h4>MINHA CONTA</h4>
          <a href="#">Meus Dados</a>
          <a href="#">Meus Pedidos</a>
          <a href="#">Cashback</a>
          <a href="#">Login</a>
        </div>
        <div>
          <h4>SUPORTE E POLÍTICAS</h4>
          <a href="#">Trocas e Devoluções</a>
          <a href="#">Dúvidas Frequentes</a>
          <a href="#">Fale Conosco</a>
          <a href="#">Política de Privacidade</a>
        </div>
        <div>
          <h4>FORMAS DE PAGAMENTO</h4>
          <img
            src="/static/uploads/img/catalogo/footer/payment.png"
            alt="Formas de Pagamento"
          />
        </div>
      </div>
      <hr />
      <p class="copy">Coffe and Code | © 2025 Todos os direitos reservados</p>
    </footer>

    <script src="/static/js/swiper.js"></script>
    <script src="/static/js/banner.js"></script>
    <script src="/static/js/menu.js"></script>
    <script src="/static/js/add_cart.js"></script>
    <script src="/static/js/cart-ui.js" defer></script>
    <script src="/static/js/products-toggle.js" defer></script>
    <script src="/static/js/nav-enhancements.js" defer></script>
    <script src="/static/js/arrows.js" defer></script>
    <script src="/static/js/catalogo_filter.js" defer></script>
  </body>
</html>
